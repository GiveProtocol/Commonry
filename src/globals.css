@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light Mode - Terminal Green & Orange */
    /* Primary colors */
    --terminal-green: #00a86b; /* Jade/emerald green */
    --terminal-green-dark: #008055; /* Darker for hover states */
    --terminal-green-glow: rgba(0, 168, 107, 0.15);

    /* Accent color */
    --terminal-orange: #ff6b35; /* Vibrant coral-orange */
    --terminal-orange-dark: #e5572e;
    --terminal-orange-glow: rgba(255, 107, 53, 0.15);

    /* Backgrounds */
    --paper: #fafaf9; /* Warm off-white */
    --paper-darker: #f5f5f4; /* Slightly darker for cards */

    /* Text */
    --ink: #1c1917; /* Near black */
    --ink-light: #44403c; /* Medium gray for secondary text */

    /* Borders & dividers */
    --border-light: #d6d3d1; /* Soft neutral gray */

    /* Shadows */
    --shadow: rgba(0, 168, 107, 0.15); /* Green tinted shadow */

    /* HSL-based tokens for compatibility */
    --background: 30 20% 98%; /* #fafaf9 */
    --foreground: 20 6% 10%; /* #1c1917 */
    --card: 30 14% 97%; /* #f5f5f4 */
    --card-foreground: 20 6% 10%;
    --primary: 162 100% 33%; /* #00a86b terminal-green */
    --primary-foreground: 30 20% 98%;
    --secondary: 15 100% 60%; /* #ff6b35 terminal-orange */
    --secondary-foreground: 30 20% 98%;
    --success: 162 100% 33%;
    --warning: 15 100% 60%;
    --danger: 0 70% 50%;
    --muted: 30 14% 97%;
    --muted-foreground: 20 7% 27%; /* #44403c */
    --border: 20 6% 84%; /* #d6d3d1 */
    --radius: 0.5rem;

    /* Typography */
    --font-sans:
      "IBM Plex Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
      sans-serif;
    --font-mono: "IBM Plex Mono", "Menlo", "Monaco", "Courier New", monospace;
  }

  .dark {
    --background: 210 24% 7%; /* Dark background #0d1117 */
    --foreground: 210 17% 82%; /* Text primary #c9d1d9 */
    --card: 213 18% 11%; /* Dark lighter #161b22 */
    --card-foreground: 210 17% 82%; /* Text primary */
    --primary: 190 100% 50%; /* Cyan #00d9ff */
    --primary-foreground: 210 24% 7%; /* Dark on cyan */
    --secondary: 43 96% 56%; /* Amber #fbbf24 */
    --secondary-foreground: 210 24% 7%; /* Dark on amber */
    --muted: 213 18% 11%;
    --muted-foreground: 210 11% 58%; /* Text muted #8b949e */
    --border: 210 19% 19%; /* Dark border #30363d */
    --accent: 190 100% 50%; /* Cyan accent */
    --accent-foreground: 210 24% 7%;

    /* Typography (same for dark mode) */
    --font-sans:
      "IBM Plex Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
      sans-serif;
    --font-mono: "IBM Plex Mono", "Menlo", "Monaco", "Courier New", monospace;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans;
    font-feature-settings:
      "rlig" 1,
      "calt" 1;
    letter-spacing: -0.01em;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-weight: 500;
    letter-spacing: -0.02em;
    line-height: 1.2;
  }

  /* Modular scale typography - 1.25 ratio */
  h1 {
    font-size: 2.441rem;
    margin-bottom: 1.5rem;
  }

  h2 {
    font-size: 1.953rem;
    margin-bottom: 1.25rem;
  }

  h3 {
    font-size: 1.563rem;
    margin-bottom: 1rem;
  }

  h4 {
    font-size: 1.25rem;
    margin-bottom: 0.875rem;
  }

  p {
    line-height: 1.6;
    margin-bottom: 1rem;
  }

  code,
  pre,
  kbd,
  samp {
    @apply font-mono;
  }

  /* Code blocks with background */
  pre {
    @apply bg-muted p-4 rounded-lg overflow-x-auto;
  }

  /* Inline code */
  code {
    @apply bg-muted px-1.5 py-0.5 rounded text-sm;
  }

  pre code {
    @apply bg-transparent p-0;
  }
}

/* Custom animations */
@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes celebrate {
  0%,
  100% {
    transform: scale(1) rotate(0);
  }
  25% {
    transform: scale(1.1) rotate(-5deg);
  }
  75% {
    transform: scale(1.1) rotate(5deg);
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Utility classes */
.animate-slide-up {
  animation: slideUp 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-celebrate {
  animation: celebrate 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.animate-shimmer {
  background: linear-gradient(
    105deg,
    transparent 40%,
    rgba(139, 92, 246, 0.3) 50%,
    transparent 60%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

/* Glass morphism effect */
.glass {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.dark .glass {
  background: rgba(30, 30, 30, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Light mode subtle gradient background */
.bg-subtle-gradient {
  background: linear-gradient(
    135deg,
    hsl(210, 40%, 98%) 0%,
    hsl(220, 40%, 97%) 50%,
    hsl(230, 40%, 96%) 100%
  );
}

/* Dark mode gradient background */
.dark .bg-subtle-gradient {
  background: linear-gradient(
    135deg,
    hsl(210, 24%, 7%) 0%,
    hsl(213, 20%, 9%) 50%,
    hsl(213, 18%, 11%) 100%
  );
}

/* Secondary button - transparent with border */
.btn-secondary {
  background: transparent;
  border: 1px solid hsl(0, 0%, 80%);
  color: hsl(0, 0%, 20%);
  transition: all 0.2s;
}

.btn-secondary:hover {
  background: hsl(0, 0%, 96%);
  border-color: hsl(0, 0%, 70%);
}

.dark .btn-secondary {
  background: transparent;
  border: 1px solid hsl(0, 0%, 30%);
  color: hsl(0, 0%, 91%);
}

.dark .btn-secondary:hover {
  background: hsl(0, 0%, 15%);
  border-color: hsl(0, 0%, 40%);
}

/* Enhanced card shadow for light mode */
.card-shadow {
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.card-shadow-deep {
  box-shadow:
    0 10px 25px -3px rgba(0, 0, 0, 0.15),
    0 4px 6px -2px rgba(0, 0, 0, 0.08);
}

/* Dark mode card with subtle border */
.dark .card-border {
  border: 1px solid hsl(0, 0%, 25%);
}

/* Icon with subtle glow (light mode) */
.icon-glow {
  filter: drop-shadow(0 0 2px rgba(37, 99, 235, 0.2));
}

.dark .icon-glow {
  filter: drop-shadow(0 0 3px rgba(0, 217, 255, 0.4));
}

/* Cyan glow effect for buttons and cards */
.glow-cyan {
  box-shadow: 0 0 20px rgba(0, 217, 255, 0.3);
}

.glow-cyan-strong {
  box-shadow: 0 0 30px rgba(0, 217, 255, 0.6);
}

/* Amber glow effect */
.glow-amber {
  box-shadow: 0 0 20px rgba(251, 191, 36, 0.3);
}

/* Gradient text - simplified for minimalism */
.gradient-text {
  color: hsl(var(--foreground));
  font-weight: 500;
}

/* Card flip animation */
.card-flip {
  transform-style: preserve-3d;
  transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

.card-flip.flipped {
  transform: rotateY(180deg);
}

.card-face {
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  display: block;
}

.card-back {
  transform: rotateY(180deg);
}

/* Ensure front is visible when not flipped */
.card-flip:not(.flipped) .card-face:not(.card-back) {
  z-index: 2;
}

/* Ensure back is visible when flipped */
.card-flip.flipped .card-back {
  z-index: 2;
}

/* Smooth focus styles */
button:focus-visible,
a:focus-visible {
  @apply outline-none ring-2 ring-primary ring-offset-2;
}

/* Prevent text selection during study */
.study-mode {
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
}

/* Loading skeleton */
.skeleton {
  @apply animate-pulse bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200;
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* Move the study card down slightly */
.study-card {
  margin-top: 20px; /* Adjust this value to control spacing */
  margin-bottom: 30px; /* Creates space for the instructions */
}

/* Reduce the height of the top section */
.top-section {
  height: 60px; /* Try lowering this from its default */
  padding: 5px 10px; /* Reduce padding if needed */
  font-size: 0.9rem; /* Optional: shrink text slightly */
}

.rating-instructions {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  position: relative;
  z-index: 10; /* Ensure it's above other elements */
}

/* Ancient Greece parchment gradient - cream to white */
.bg-parchment-gradient {
  background: linear-gradient(
    to top,
    #f5f3e8 0%,
    /* Cream at bottom */ #f5f3e8 60%,
    /* Cream continues */ #fdfcf7 75%,
    /* Light cream transition */ #ffffff 85% /* White at top 1/5 */
  );
}

.dark .bg-parchment-gradient {
  background: linear-gradient(
    to top,
    #2c2416 0%,
    /* Dark brown at bottom */ #2c2416 60%,
    /* Dark brown continues */ #1a1612 75%,
    /* Darker transition */ #000000 85% /* Black at top 1/5 */
  );
}

/* Anki card HTML content styling */
.anki-card-content {
  text-align: center;
  line-height: 1.6;
}

.anki-card-content hr {
  margin: 1rem 0;
  border-color: #d1d5db;
}

.dark .anki-card-content hr {
  border-color: #374151;
}

.anki-card-content .Lesson,
.anki-card-content .phonetics,
.anki-card-content .translation {
  margin: 0.5rem 0;
  display: block;
}

.anki-card-content .Lesson {
  font-size: 0.875rem;
  color: #6b7280;
}

.dark .anki-card-content .Lesson {
  color: #9ca3af;
}

.anki-card-content .phonetics {
  font-size: 1.5rem;
  font-weight: 600;
}

.anki-card-content .translation {
  font-size: 1.125rem;
}

/* Preserve line breaks in Anki cards */
.anki-card-content br {
  display: block;
  content: "";
  margin: 0.5rem 0;
}

/* Link styling */
.anki-card-content a {
  color: #3b82f6;
  text-decoration: underline;
}

.dark .anki-card-content a {
  color: #60a5fa;
}

/* Grid background pattern */
.grid-bg {
  background-image:
    linear-gradient(#30363d 1px, transparent 1px),
    linear-gradient(90deg, #30363d 1px, transparent 1px);
  background-size: 50px 50px;
}

/* Scanline effect */
.scanline {
  position: relative;
  overflow: hidden;
}

.scanline::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    to bottom,
    transparent 50%,
    rgba(0, 217, 255, 0.05) 50%
  );
  background-size: 100% 4px;
  pointer-events: none;
  animation: scan 8s linear infinite;
  z-index: 9999;
}

/* Theme-aware terminal colors */
.terminal-primary {
  color: var(--terminal-green);
}

.dark .terminal-primary {
  color: #00d9ff; /* cyan */
}

.terminal-accent {
  color: var(--terminal-orange);
}

.dark .terminal-accent {
  color: #fbbf24; /* amber */
}

.border-terminal-primary {
  border-color: var(--terminal-green);
}

.dark .border-terminal-primary {
  border-color: #00d9ff;
}

.border-terminal-accent {
  border-color: var(--terminal-orange);
}

.dark .border-terminal-accent {
  border-color: #fbbf24;
}

.bg-terminal-primary {
  background-color: var(--terminal-green);
}

.dark .bg-terminal-primary {
  background-color: #00d9ff;
}

.bg-terminal-accent {
  background-color: var(--terminal-orange);
}

.dark .bg-terminal-accent {
  background-color: #fbbf24;
}

/* Terminal glow effects */
.shadow-terminal-glow {
  box-shadow: 0 0 20px var(--terminal-green-glow);
}

.dark .shadow-terminal-glow {
  box-shadow: 0 0 20px rgba(0, 217, 255, 0.3);
}

.shadow-terminal-accent-glow {
  box-shadow: 0 0 20px var(--terminal-orange-glow);
}

.dark .shadow-terminal-accent-glow {
  box-shadow: 0 0 20px rgba(251, 191, 36, 0.3);
}

/* Text shadow glow */
.text-shadow-terminal {
  text-shadow: 0 0 15px var(--terminal-green-glow);
}

.dark .text-shadow-terminal {
  text-shadow: 0 0 15px rgba(0, 217, 255, 0.5);
}

.text-shadow-terminal-accent {
  text-shadow: 0 0 15px var(--terminal-orange-glow);
}

.dark .text-shadow-terminal-accent {
  text-shadow: 0 0 15px rgba(251, 191, 36, 0.5);
}

/* Background colors with theme support */
.bg-terminal-surface {
  background-color: var(--paper-darker);
}

.dark .bg-terminal-surface {
  background-color: #161b22;
}

.bg-terminal-base {
  background-color: var(--paper);
}

.dark .bg-terminal-base {
  background-color: #0d1117;
}

/* Border colors */
.border-terminal-muted {
  border-color: var(--border-light);
}

.dark .border-terminal-muted {
  border-color: #30363d;
}

/* Text colors */
.text-terminal-muted {
  color: var(--ink-light);
}

.dark .text-terminal-muted {
  color: #8b949e;
}

.text-terminal-base {
  color: var(--ink);
}

.dark .text-terminal-base {
  color: #c9d1d9;
}

/* Accessibility: Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .scanline::before,
  .animate-scan,
  .animate-shimmer,
  .animate-blink,
  .animate-slide-up,
  .animate-celebrate,
  .animate-float,
  [class*="animate-"] {
    animation: none !important;
    transition: none !important;
  }

  /* Keep transitions for hover states but make them instant */
  *:hover {
    transition-duration: 0.01s !important;
  }
}

/* Focus visible styles for keyboard navigation */
@layer base {
  *:focus-visible {
    @apply outline-none ring-2 ring-[#00d9ff] ring-offset-2 ring-offset-[#0d1117];
  }

  button:focus-visible,
  a:focus-visible {
    @apply outline-none ring-2 ring-[#00d9ff] ring-offset-2 ring-offset-[#0d1117];
  }
}

/* Skip to main content link for screen readers */
.skip-to-main {
  position: absolute;
  left: -9999px;
  z-index: 999;
  padding: 1rem 1.5rem;
  background-color: #00d9ff;
  color: #0d1117;
  text-decoration: none;
  font-weight: bold;
}

.skip-to-main:focus {
  left: 50%;
  transform: translateX(-50%);
  top: 1rem;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .border-cyan {
    border-width: 3px;
  }

  .text-cyan,
  .text-amber {
    font-weight: 600;
  }
}

/* Print styles - remove animations and backgrounds */
@media print {
  .scanline::before,
  .grid-bg,
  [class*="animate-"] {
    display: none !important;
  }

  body {
    background: white !important;
    color: black !important;
  }
}
